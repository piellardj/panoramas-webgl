{"version":3,"file":"main.min.js","mappings":"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","sources":["webpack://panoramas-webgl/./src/ts/converter.ts","webpack://panoramas-webgl/./src/ts/format-utils.ts","webpack://panoramas-webgl/./src/ts/gl-utils/gl-canvas.ts","webpack://panoramas-webgl/./src/ts/gl-utils/gl-resource.ts","webpack://panoramas-webgl/./src/ts/gl-utils/matrix/mat4.ts","webpack://panoramas-webgl/./src/ts/gl-utils/matrix/vec3.ts","webpack://panoramas-webgl/./src/ts/gl-utils/shader-manager.ts","webpack://panoramas-webgl/./src/ts/gl-utils/shader-sources.ts","webpack://panoramas-webgl/./src/ts/gl-utils/shader.ts","webpack://panoramas-webgl/./src/ts/gl-utils/vbo.ts","webpack://panoramas-webgl/./src/ts/gl-utils/viewport.ts","webpack://panoramas-webgl/./src/ts/main.ts","webpack://panoramas-webgl/./src/ts/parameters.ts","webpack://panoramas-webgl/./src/ts/viewer.ts","webpack://panoramas-webgl/webpack/bootstrap","webpack://panoramas-webgl/webpack/startup"],"sourcesContent":["import { gl } from \"./gl-utils/gl-canvas\";\r\nimport GLResource from \"./gl-utils/gl-resource\";\r\nimport Shader from \"./gl-utils/shader\";\r\nimport * as ShaderManager from \"./gl-utils/shader-manager\";\r\nimport VBO from \"./gl-utils/vbo\";\r\n\r\nimport { Format } from \"./format-utils\";\r\nimport { Parameters } from \"./parameters\";\r\n\r\nclass Converter extends GLResource {\r\n    private _shaderBoxToBox: Shader;\r\n    private _shaderBoxToPlanet: Shader;\r\n    private _shaderBoxToSphere: Shader;\r\n\r\n    private _shaderSphereToBox: Shader;\r\n    private _shaderSphereToPlanet: Shader;\r\n    private _shaderSphereToSphere: Shader;\r\n\r\n    private _shaderPlanetToBox: Shader;\r\n    private _shaderPlanetToPlanet: Shader;\r\n    private _shaderPlanetToSphere: Shader;\r\n\r\n    private _vbo: VBO;\r\n\r\n    constructor() {\r\n        super(gl);\r\n\r\n        this._vbo = VBO.createQuad(gl, -1, -1, 1, 1);\r\n\r\n        this.buildShader(\"_shaderBoxToBox\",         \"converter.vert\", \"converterBoxToBox.frag\");\r\n        this.buildShader(\"_shaderBoxToPlanet\",      \"converter.vert\", \"converterBoxToPlanet.frag\");\r\n        this.buildShader(\"_shaderBoxToSphere\",      \"converter.vert\", \"converterBoxToSphere.frag\");\r\n\r\n        this.buildShader(\"_shaderSphereToBox\",      \"converter.vert\", \"converterSphereToBox.frag\");\r\n        this.buildShader(\"_shaderSphereToPlanet\",   \"converter.vert\", \"converterSphereToPlanet.frag\");\r\n        this.buildShader(\"_shaderSphereToSphere\",   \"converter.vert\", \"converterSphereToSphere.frag\");\r\n\r\n        this.buildShader(\"_shaderPlanetToBox\",      \"converter.vert\", \"converterPlanetToBox.frag\");\r\n        this.buildShader(\"_shaderPlanetToPlanet\",   \"converter.vert\", \"converterPlanetToPlanet.frag\");\r\n        this.buildShader(\"_shaderPlanetToSphere\",   \"converter.vert\", \"converterPlanetToSphere.frag\");\r\n    }\r\n\r\n    public freeGLResources(): void {\r\n        if (this._vbo) {\r\n            this._vbo.freeGLResources();\r\n            this._vbo = null;\r\n        }\r\n\r\n        this.deleteShader(\"_shaderBoxToBox\");\r\n        this.deleteShader(\"_shaderBoxToPlanet\");\r\n        this.deleteShader(\"_shaderBoxToSphere\");\r\n\r\n        this.deleteShader(\"_shaderSphereToBox\");\r\n        this.deleteShader(\"_shaderSphereToPlanet\");\r\n        this.deleteShader(\"_shaderSphereToSphere\");\r\n\r\n        this.deleteShader(\"_shaderPlanetToBox\");\r\n        this.deleteShader(\"_shaderPlanetToPlanet\");\r\n        this.deleteShader(\"_shaderPlanetToSphere\");\r\n    }\r\n\r\n    public draw(texture: WebGLTexture): void {\r\n        const shader = this.getShader(Parameters.inputFormat, Parameters.outputFormat);\r\n\r\n        if (shader && texture) {\r\n            /* tslint:disable:no-string-literal */\r\n            shader.u[\"uTexture\"].value = texture;\r\n            shader.u[\"uPaddingTop\"].value = Parameters.paddingTop;\r\n            shader.u[\"uPaddingBottom\"].value = Parameters.paddingBottom;\r\n            shader.u[\"uPaddingBack\"].value = Parameters.paddingBack;\r\n            shader.u[\"uRotateZ\"].value = Parameters.rotateZ;\r\n            shader.u[\"uFlipVertically\"].value = Parameters.flipVertically ? -1 : 1;\r\n            /* tslint:enable:no-string-literal */\r\n\r\n            shader.use();\r\n            shader.bindUniformsAndAttributes();\r\n\r\n            gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\r\n        }\r\n    }\r\n\r\n    private deleteShader(name: string): void {\r\n        /* tslint:disable:no-string-literal */\r\n        if (this[name]) {\r\n            this[name].freeGLResources();\r\n            this[name] = null;\r\n        }\r\n        /* tslint:enable:no-string-literal */\r\n    }\r\n\r\n    private buildShader(name: string, vertex: string, fragment: string): void {\r\n        ShaderManager.buildShader(\r\n            {\r\n                fragmentFilename: fragment,\r\n                vertexFilename: vertex,\r\n            },\r\n            (shader) => {\r\n                if (shader !== null) {\r\n                    /* tslint:disable:no-string-literal */\r\n                    this[name] = shader;\r\n                    this[name].a[\"aCorner\"].VBO = this._vbo;\r\n                    /* tslint:enable:no-string-literal */\r\n                }\r\n            });\r\n    }\r\n\r\n    private getShader(inputFormat: Format, outputFormat: Format): Shader {\r\n        if (inputFormat === Format.Skybox) {\r\n            if (outputFormat === Format.Skybox) {\r\n                return this._shaderBoxToBox;\r\n            } else if (outputFormat === Format.Skysphere) {\r\n                return this._shaderBoxToSphere;\r\n            } else /* if (outputFormat === Format.Tinyplanet) */ {\r\n                return this._shaderBoxToPlanet;\r\n            }\r\n        } else if (inputFormat === Format.Skysphere) {\r\n            if (outputFormat === Format.Skybox) {\r\n                return this._shaderSphereToBox;\r\n            } else if (outputFormat === Format.Skysphere) {\r\n                return this._shaderSphereToSphere;\r\n            } else /* if (outputFormat === Format.Tinyplanet) */ {\r\n                return this._shaderSphereToPlanet;\r\n            }\r\n        } else if (inputFormat === Format.Tinyplanet) {\r\n            if (outputFormat === Format.Skybox) {\r\n                return this._shaderPlanetToBox;\r\n            } else if (outputFormat === Format.Skysphere) {\r\n                return this._shaderPlanetToSphere;\r\n            } else /* if (outputFormat === Format.Tinyplanet) */ {\r\n                return this._shaderPlanetToPlanet;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default Converter;\r\n","enum Format {\r\n    Skybox = \"skybox\",\r\n    Skysphere = \"skysphere\",\r\n    Tinyplanet = \"tinyplanet\",\r\n}\r\n\r\nclass FormatUtils {\r\n    public static guessFormat(image: HTMLImageElement): Format {\r\n        if (FormatUtils.mayBeSkybox(image)) {\r\n            return Format.Skybox;\r\n        }\r\n\r\n        const ratio = image.width / image.height;\r\n        if (Math.abs(ratio - 1) < 0.1) {\r\n            return Format.Tinyplanet;\r\n        }\r\n\r\n        return Format.Skysphere;\r\n    }\r\n\r\n    public static parseString(str: string): Format {\r\n        if (str === Format.Skybox) {\r\n            return Format.Skybox;\r\n        } else if (str === Format.Tinyplanet) {\r\n            return Format.Tinyplanet;\r\n        } else {\r\n            return Format.Skysphere;\r\n        }\r\n    }\r\n\r\n    public static ratio(format: Format): number {\r\n        if (format === Format.Skybox) {\r\n            return 4 / 3;\r\n        } else if (format === Format.Skysphere) {\r\n            return 2;\r\n        } else /* if (format === Format.Tinyplanet) */ {\r\n            return 1;\r\n        }\r\n    }\r\n\r\n    private static mayBeSkybox(image: HTMLImageElement): boolean {\r\n        const context = document.createElement(\"canvas\").getContext(\"2d\", { willReadFrequently: true });\r\n        context.canvas.width = 8;\r\n        context.canvas.height = 6;\r\n        context.drawImage(image, 0, 0, context.canvas.width, context.canvas.height);\r\n\r\n        const testedPixels = [\r\n            { x: 0, y: 0 }, { x: 5, y: 0 }, { x: 6, y: 0 }, { x: 7, y: 0 },   // top\r\n            { x: 0, y: 5 }, { x: 5, y: 5 }, { x: 6, y: 5 }, { x: 7, y: 5 },  // bottom\r\n        ];\r\n\r\n        const reference = context.getImageData(testedPixels[0].x, testedPixels[0].y, 1, 1).data;\r\n        for (const tested of testedPixels) {\r\n            const sample = context.getImageData(tested.x, tested.y, 1, 1).data;\r\n\r\n            for (let i = 0; i < 4; ++i) {\r\n                if (sample[i] !== reference[i]) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    private constructor() { }\r\n}\r\n\r\nexport {\r\n    Format,\r\n    FormatUtils,\r\n};\r\n","import \"../page-interface-generated\";\r\n\r\nlet gl: WebGLRenderingContext = null;\r\n\r\n/** Initializes a WebGL context */\r\nfunction initGL(flags: any): boolean {\r\n    function setError(message: string) {\r\n        Page.Demopage.setErrorMessage(\"webgl-support\", message);\r\n    }\r\n\r\n    const canvas = Page.Canvas.getCanvas();\r\n\r\n    gl = canvas.getContext(\"webgl\", flags) as WebGLRenderingContext;\r\n    if (gl == null) {\r\n        gl = canvas.getContext(\"experimental-webgl\", flags) as WebGLRenderingContext;\r\n        if (gl == null) {\r\n            setError(\"Your browser or device does not seem to support WebGL.\");\r\n            return false;\r\n        }\r\n\r\n        setError(\"Your browser or device only supports experimental WebGL.\\n\" +\r\n            \"The simulation may not run as expected.\");\r\n    }\r\n\r\n    gl.disable(gl.CULL_FACE);\r\n    gl.disable(gl.DEPTH_TEST);\r\n    gl.disable(gl.BLEND);\r\n    gl.clearColor(0.0, 0.0, 0.0, 1.0);\r\n\r\n    return true;\r\n}\r\n\r\n/* Adjusts the GL canvas size to the actual canvas element size on the page */\r\nfunction adjustSize(hidpi: boolean = false): void {\r\n    const cssPixel: number = (hidpi) ? window.devicePixelRatio : 1;\r\n    const canvas = gl.canvas as HTMLCanvasElement;\r\n\r\n    const width: number = Math.floor(canvas.clientWidth * cssPixel);\r\n    const height: number = Math.floor(canvas.clientHeight * cssPixel);\r\n    if (canvas.width !== width || canvas.height !== height) {\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n    }\r\n}\r\n\r\nexport {\r\n    adjustSize,\r\n    initGL,\r\n    gl,\r\n};\r\n","abstract class GLResource {\r\n    private _gl: WebGLRenderingContext;\r\n\r\n    constructor(gl: WebGLRenderingContext) {\r\n        this._gl = gl;\r\n    }\r\n\r\n    public gl(): WebGLRenderingContext {\r\n        return this._gl;\r\n    }\r\n\r\n    public abstract freeGLResources(): void;\r\n}\r\n\r\nexport default GLResource;\r\n","import { Vec3 } from \"./vec3\";\r\n\r\n/* Column-first */\r\nclass Mat4 {\r\n    private static _tmpMatrix = null; // helps for internal computing\r\n\r\n    private static get tmpMatrix(): Mat4 {\r\n        if (Mat4._tmpMatrix === null) {\r\n            Mat4._tmpMatrix = new Mat4();\r\n        }\r\n\r\n        return Mat4._tmpMatrix;\r\n    }\r\n\r\n    private _val: Float32Array;\r\n\r\n    constructor() {\r\n        this._val = new Float32Array(16);\r\n        this.identity();\r\n    }\r\n\r\n    public get val(): Float32Array {\r\n        return this._val;\r\n    }\r\n\r\n    public identity(): void {\r\n        for (let i = 0; i < 16; ++i) {\r\n            this._val[i] = 0;\r\n        }\r\n\r\n        this._val[0] = 1;\r\n        this._val[5] = 1;\r\n        this._val[10] = 1;\r\n        this._val[15] = 1;\r\n    }\r\n\r\n    public lookAt(eye: Vec3, center: Vec3, up: Vec3): void {\r\n        if (eye.equals(center)) {\r\n            this.identity();\r\n            return;\r\n        }\r\n\r\n        const z = Vec3.substract(eye, center);\r\n        z.normalize();\r\n\r\n        const x = Vec3.crossProduct(up, z);\r\n        x.normalize();\r\n\r\n        const y = Vec3.crossProduct(z, x);\r\n        y.normalize();\r\n\r\n        this._val[0] = x.x;\r\n        this._val[1] = y.x;\r\n        this._val[2] = z.x;\r\n        this._val[3] = 0;\r\n        this._val[4] = x.y;\r\n        this._val[5] = y.y;\r\n        this._val[6] = z.y;\r\n        this._val[7] = 0;\r\n        this._val[8] = x.z;\r\n        this._val[9] = y.z;\r\n        this._val[10] = z.z;\r\n        this._val[11] = 0;\r\n        this._val[12] = -Vec3.dotProduct(x, eye);\r\n        this._val[13] = -Vec3.dotProduct(y, eye);\r\n        this._val[14] = -Vec3.dotProduct(z, eye);\r\n        this._val[15] = 1;\r\n    }\r\n\r\n    public multiplyRight(m2: Mat4) {\r\n        const tmp = Mat4.tmpMatrix._val;\r\n        const myself = this._val;\r\n        const other = m2._val;\r\n\r\n        for (let iCol = 0; iCol < 4; ++iCol) {\r\n            for (let iRow = 0; iRow < 4; ++iRow) {\r\n                tmp[4 * iCol + iRow] = 0;\r\n\r\n                for (let i = 0; i < 4; ++i) {\r\n                    tmp[4 * iCol + iRow] += myself[4 * i + iRow] * other[4 * iCol + i];\r\n                }\r\n            }\r\n        }\r\n\r\n        this.swapWithTmpMatrix();\r\n    }\r\n\r\n    /* Returns false is the matrix cannot be inverted. */\r\n    public invert(): boolean {\r\n        // shortcuts\r\n        const m = this._val;\r\n        /* tslint:disable:one-variable-per-declaration */\r\n        const m00 = m[0], m01 = m[1], m02 = m[2], m03 = m[3];\r\n        const m10 = m[4], m11 = m[5], m12 = m[6], m13 = m[7];\r\n        const m20 = m[8], m21 = m[9], m22 = m[10], m23 = m[11];\r\n        const m30 = m[12], m31 = m[13], m32 = m[14], m33 = m[15];\r\n        /* tslint:enable:one-variable-per-declaration */\r\n\r\n        const b00 = m00 * m11 - m01 * m10;\r\n        const b01 = m00 * m12 - m02 * m10;\r\n        const b02 = m00 * m13 - m03 * m10;\r\n        const b03 = m01 * m12 - m02 * m11;\r\n        const b04 = m01 * m13 - m03 * m11;\r\n        const b05 = m02 * m13 - m03 * m12;\r\n        const b06 = m20 * m31 - m21 * m30;\r\n        const b07 = m20 * m32 - m22 * m30;\r\n        const b08 = m20 * m33 - m23 * m30;\r\n        const b09 = m21 * m32 - m22 * m31;\r\n        const b10 = m21 * m33 - m23 * m31;\r\n        const b11 = m22 * m33 - m23 * m32;\r\n\r\n        // Compute the determinant\r\n        let det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\r\n\r\n        if (!det) {\r\n            return false;\r\n        }\r\n        det = 1.0 / det;\r\n\r\n        /* Compute the invert and store it on Mat4.tmp matrix */\r\n        const tmpVals = Mat4.tmpMatrix._val;\r\n        tmpVals[0] = (m11 * b11 - m12 * b10 + m13 * b09) * det;\r\n        tmpVals[1] = (m02 * b10 - m01 * b11 - m03 * b09) * det;\r\n        tmpVals[2] = (m31 * b05 - m32 * b04 + m33 * b03) * det;\r\n        tmpVals[3] = (m22 * b04 - m21 * b05 - m23 * b03) * det;\r\n        tmpVals[4] = (m12 * b08 - m10 * b11 - m13 * b07) * det;\r\n        tmpVals[5] = (m00 * b11 - m02 * b08 + m03 * b07) * det;\r\n        tmpVals[6] = (m32 * b02 - m30 * b05 - m33 * b01) * det;\r\n        tmpVals[7] = (m20 * b05 - m22 * b02 + m23 * b01) * det;\r\n        tmpVals[8] = (m10 * b10 - m11 * b08 + m13 * b06) * det;\r\n        tmpVals[9] = (m01 * b08 - m00 * b10 - m03 * b06) * det;\r\n        tmpVals[10] = (m30 * b04 - m31 * b02 + m33 * b00) * det;\r\n        tmpVals[11] = (m21 * b02 - m20 * b04 - m23 * b00) * det;\r\n        tmpVals[12] = (m11 * b07 - m10 * b09 - m12 * b06) * det;\r\n        tmpVals[13] = (m00 * b09 - m01 * b07 + m02 * b06) * det;\r\n        tmpVals[14] = (m31 * b01 - m30 * b03 - m32 * b00) * det;\r\n        tmpVals[15] = (m20 * b03 - m21 * b01 + m22 * b00) * det;\r\n\r\n        this.swapWithTmpMatrix();\r\n\r\n        return true;\r\n    }\r\n\r\n    public perspective(fovy: number, aspectRatio: number, nearPlane: number, farPlane: number): void {\r\n        const f = 1 / Math.tan(fovy / 2);\r\n\r\n        this._val[0] = f / aspectRatio;\r\n        this._val[1] = 0;\r\n        this._val[2] = 0;\r\n        this._val[3] = 0;\r\n        this._val[4] = 0;\r\n        this._val[5] = f;\r\n        this._val[6] = 0;\r\n        this._val[7] = 0;\r\n        this._val[8] = 0;\r\n        this._val[9] = 0;\r\n        this._val[11] = -1;\r\n        this._val[12] = 0;\r\n        this._val[13] = 0;\r\n        this._val[15] = 0;\r\n\r\n        if (farPlane === Infinity) {\r\n            this._val[10] = -1;\r\n            this._val[14] = -2 * nearPlane;\r\n        } else {\r\n            const tmp = 1 / (nearPlane - farPlane);\r\n            this._val[10] = (farPlane + nearPlane) * tmp;\r\n            this._val[14] = (2 * farPlane * nearPlane) * tmp;\r\n        }\r\n    }\r\n\r\n    public perspectiveInverse(fovy: number, aspectRatio: number, nearPlane: number, farPlane: number): void {\r\n        const f = Math.tan(fovy / 2);\r\n\r\n        this._val[0] = aspectRatio * f;\r\n        this._val[1] = 0;\r\n        this._val[2] = 0;\r\n        this._val[3] = 0;\r\n        this._val[4] = 0;\r\n        this._val[5] = f;\r\n        this._val[6] = 0;\r\n        this._val[7] = 0;\r\n        this._val[8] = 0;\r\n        this._val[9] = 0;\r\n        this._val[10] = 0;\r\n        this._val[12] = 0;\r\n        this._val[13] = 0;\r\n        this._val[14] = -1;\r\n\r\n        if (farPlane === Infinity) {\r\n            this._val[11] = -0.5;\r\n            this._val[15] = 0.5 / nearPlane;\r\n        } else {\r\n            const tmp = 0.5 / (nearPlane * farPlane);\r\n            this._val[11] = (nearPlane - farPlane) * tmp;\r\n            this._val[15] = (nearPlane + farPlane) * tmp;\r\n        }\r\n    }\r\n\r\n    private swapWithTmpMatrix(): void {\r\n        const tmp = Mat4.tmpMatrix._val;\r\n        Mat4.tmpMatrix._val = this._val;\r\n        this._val = tmp;\r\n    }\r\n}\r\n\r\nexport { Mat4 };\r\n","const EPSILON = 0.0001;\r\n\r\nclass Vec3 {\r\n    public static dotProduct(v1: Vec3, v2: Vec3): number {\r\n        return v1._val[0] * v2._val[0] +\r\n            v1._val[1] * v2._val[1] +\r\n            v1._val[2] * v2._val[2];\r\n    }\r\n\r\n    public static crossProduct(v1: Vec3, v2: Vec3): Vec3 {\r\n        return new Vec3(\r\n            v1._val[1] * v2._val[2] - v1._val[2] * v2._val[1],\r\n            v1._val[2] * v2._val[0] - v1._val[0] * v2._val[2],\r\n            v1._val[0] * v2._val[1] - v1._val[1] * v2._val[0]);\r\n    }\r\n\r\n    public static substract(v1: Vec3, v2: Vec3): Vec3 {\r\n        return new Vec3(\r\n            v1._val[0] - v2._val[0],\r\n            v1._val[1] - v2._val[1],\r\n            v1._val[2] - v2._val[2]);\r\n    }\r\n\r\n    private _val: Float32Array;\r\n\r\n    constructor(x: number, y: number, z: number) {\r\n        this._val = new Float32Array(3);\r\n        this._val[0] = x;\r\n        this._val[1] = y;\r\n        this._val[2] = z;\r\n    }\r\n\r\n    public get x(): number {\r\n        return this._val[0];\r\n    }\r\n\r\n    public get y(): number {\r\n        return this._val[1];\r\n    }\r\n\r\n    public get z(): number {\r\n        return this._val[2];\r\n    }\r\n\r\n    public equals(other: Vec3): boolean {\r\n        return Math.abs(this._val[0] - other._val[0]) < EPSILON &&\r\n            Math.abs(this._val[1] - other._val[1]) < EPSILON &&\r\n            Math.abs(this._val[2] - other._val[2]) < EPSILON;\r\n    }\r\n\r\n    public divideByScalar(scalar: number): void {\r\n        this._val[0] /= scalar;\r\n        this._val[1] /= scalar;\r\n        this._val[2] /= scalar;\r\n    }\r\n\r\n    public substract(other: Vec3): void {\r\n        this._val[0] -= other._val[0];\r\n        this._val[1] -= other._val[1];\r\n        this._val[2] -= other._val[2];\r\n    }\r\n\r\n    public get length(): number {\r\n        const norm = this._val[0] * this._val[0] +\r\n            this._val[1] * this._val[1] +\r\n            this._val[2] * this._val[2];\r\n        return Math.sqrt(norm);\r\n    }\r\n\r\n    /* Return false if vector cannot be normalized because it's null. */\r\n    public normalize(): boolean {\r\n        if (Math.abs(this._val[0]) < EPSILON &&\r\n            Math.abs(this._val[1]) < EPSILON &&\r\n            Math.abs(this._val[2]) < EPSILON) {\r\n            this._val[0] = 0;\r\n            this._val[1] = 0;\r\n            this._val[2] = 0;\r\n            return false;\r\n        }\r\n\r\n        this.divideByScalar(this.length);\r\n\r\n        return true;\r\n    }\r\n}\r\n\r\nexport { Vec3 };\r\n","import { gl } from \"./gl-canvas\";\r\nimport Shader from \"./shader\";\r\nimport * as ShaderSources from \"./shader-sources\";\r\n\r\ntype RegisterCallback = (success: boolean, shader: Shader | null) => void;\r\n\r\ninterface IShaderInfos {\r\n    fragmentFilename: string;\r\n    vertexFilename: string;\r\n}\r\n\r\ninterface ICachedShader {\r\n    shader: Shader;\r\n    infos: IShaderInfos;\r\n    pending: boolean;\r\n    failed: boolean;\r\n    callbacks: RegisterCallback[];\r\n}\r\n\r\nconst cachedShaders: { [id: string]: ICachedShader} = {};\r\n\r\nfunction getShader(name: string): Shader | null {\r\n    return cachedShaders[name].shader;\r\n}\r\n\r\ntype BuildCallback = (builtShader: Shader | null) => void;\r\n\r\nfunction buildShader(infos: IShaderInfos, callback: BuildCallback) {\r\n    let sourcesPending = 2;\r\n    let sourcesFailed = 0;\r\n\r\n    function loadedSource(success: boolean) {\r\n        sourcesPending--;\r\n        if (!success) {\r\n            sourcesFailed++;\r\n        }\r\n\r\n        if (sourcesPending === 0) {\r\n            let shader = null;\r\n\r\n            if (sourcesFailed === 0) {\r\n                const vert = ShaderSources.getSource(infos.vertexFilename);\r\n                const frag = ShaderSources.getSource(infos.fragmentFilename);\r\n                shader = new Shader(gl, vert, frag);\r\n            }\r\n\r\n            callback(shader);\r\n        }\r\n    }\r\n\r\n    ShaderSources.loadSource(infos.vertexFilename, loadedSource);\r\n    ShaderSources.loadSource(infos.fragmentFilename, loadedSource);\r\n}\r\n\r\nfunction registerShader(name: string, infos: IShaderInfos, callback: RegisterCallback): void {\r\n    function callAndClearCallbacks(cached: ICachedShader) {\r\n        for (const cachedCallback of cached.callbacks) {\r\n            cachedCallback(!cached.failed, cached.shader);\r\n        }\r\n\r\n        cached.callbacks = [];\r\n    }\r\n\r\n    if (typeof cachedShaders[name] === \"undefined\") {\r\n        cachedShaders[name] = {\r\n            callbacks: [callback],\r\n            failed: false,\r\n            infos,\r\n            pending: true,\r\n            shader: null,\r\n        };\r\n        const cached = cachedShaders[name];\r\n\r\n        buildShader(infos, (builtShader) => {\r\n            cached.pending = false;\r\n            cached.failed = builtShader === null;\r\n            cached.shader = builtShader;\r\n\r\n            callAndClearCallbacks(cached);\r\n        });\r\n    } else {\r\n        const cached = cachedShaders[name];\r\n\r\n        if (cached.pending === true) {\r\n            cached.callbacks.push(callback);\r\n        } else {\r\n            callAndClearCallbacks(cached);\r\n        }\r\n    }\r\n}\r\n\r\nfunction deleteShader(name: string) {\r\n    if (cachedShaders[name]) {\r\n        if (cachedShaders[name].shader) {\r\n            cachedShaders[name].shader.freeGLResources();\r\n        }\r\n        delete cachedShaders[name];\r\n    }\r\n}\r\n\r\nexport {\r\n    buildShader,\r\n    getShader,\r\n    IShaderInfos,\r\n    registerShader,\r\n    deleteShader,\r\n};\r\n","type LoadCallback = (success: boolean)  => void;\r\n\r\ninterface ICachedSource {\r\n    text: string;\r\n    pending: boolean;\r\n    failed: boolean;\r\n    callbacks: LoadCallback[];\r\n}\r\n\r\nconst cachedSources: { [id: string]: ICachedSource } = {};\r\n\r\n/* Fetches asynchronously the shader source from server and stores it in cache. */\r\nfunction loadSource(filename: string, callback: LoadCallback) {\r\n    function callAndClearCallbacks(cached: ICachedSource) {\r\n        for (const cachedCallback of cached.callbacks) {\r\n            cachedCallback(!cached.failed);\r\n        }\r\n\r\n        cached.callbacks = [];\r\n    }\r\n\r\n    if (typeof cachedSources[filename] === \"undefined\") {\r\n        cachedSources[filename] = {\r\n            callbacks: [callback],\r\n            failed: false,\r\n            pending: true,\r\n            text: null,\r\n        };\r\n        const cached = cachedSources[filename];\r\n\r\n        const xhr = new XMLHttpRequest();\r\n        xhr.open(\"GET\", \"./shaders/\" + filename, true);\r\n        xhr.onload = () => {\r\n            if (xhr.readyState === 4) {\r\n                cached.pending = false;\r\n\r\n                if (xhr.status === 200) {\r\n                    cached.text = xhr.responseText;\r\n                    cached.failed = false;\r\n                } else {\r\n                    console.error(\"Cannot load '\" + filename + \"' shader source: \" + xhr.statusText);\r\n                    cached.failed = true;\r\n                }\r\n\r\n                callAndClearCallbacks(cached);\r\n            }\r\n        };\r\n        xhr.onerror = () => {\r\n            console.error(\"Cannot load '\" + filename + \"' shader source: \" + xhr.statusText);\r\n            cached.pending = false;\r\n            cached.failed = true;\r\n            callAndClearCallbacks(cached);\r\n        };\r\n\r\n        xhr.send(null);\r\n    } else {\r\n        const cached = cachedSources[filename];\r\n\r\n        if (cached.pending === true) {\r\n            cached.callbacks.push(callback);\r\n        } else {\r\n            callAndClearCallbacks(cached);\r\n        }\r\n    }\r\n}\r\n\r\nfunction getSource(filename: string): string {\r\n    return cachedSources[filename].text;\r\n}\r\n\r\nexport {\r\n    getSource,\r\n    loadSource,\r\n};\r\n","import GLResource from \"./gl-resource\";\r\nimport VBO from \"./vbo\";\r\n\r\nfunction notImplemented(gl: WebGLRenderingContext, location: WebGLUniformLocation, value: any): void {\r\n    alert(\"NOT IMPLEMENTED YET\");\r\n}\r\n\r\nfunction bindUniformFloat(gl: WebGLRenderingContext, location: WebGLUniformLocation, value: number | number[]): void;\r\nfunction bindUniformFloat(gl: WebGLRenderingContext, location: WebGLUniformLocation, value: any): void {\r\n    if (Array.isArray(value)) {\r\n        gl.uniform1fv(location, value);\r\n    } else {\r\n        gl.uniform1f(location, value);\r\n    }\r\n}\r\n\r\nfunction bindUniformFloat2v(gl: WebGLRenderingContext, location: WebGLUniformLocation, value: number[]): void {\r\n    gl.uniform2fv(location, value);\r\n}\r\n\r\nfunction bindUniformFloat3v(gl: WebGLRenderingContext, location: WebGLUniformLocation, value: number[]): void {\r\n    gl.uniform3fv(location, value);\r\n}\r\n\r\nfunction bindUniformFloat4v(gl: WebGLRenderingContext, location: WebGLUniformLocation, value: number[]): void {\r\n    gl.uniform4fv(location, value);\r\n}\r\n\r\nfunction bindUniformInt(gl: WebGLRenderingContext, location: WebGLUniformLocation, value: number | number[]): void;\r\nfunction bindUniformInt(gl: WebGLRenderingContext, location: WebGLUniformLocation, value: any): void {\r\n    if (Array.isArray(value)) {\r\n        gl.uniform1iv(location, value);\r\n    } else {\r\n        gl.uniform1iv(location, value);\r\n    }\r\n}\r\n\r\nfunction bindUniformInt2v(gl: WebGLRenderingContext, location: WebGLUniformLocation, value: number[]): void {\r\n    gl.uniform2iv(location, value);\r\n}\r\n\r\nfunction bindUniformInt3v(gl: WebGLRenderingContext, location: WebGLUniformLocation, value: number[]): void {\r\n    gl.uniform3iv(location, value);\r\n}\r\n\r\nfunction bindUniformInt4v(gl: WebGLRenderingContext, location: WebGLUniformLocation, value: number[]): void {\r\n    gl.uniform4iv(location, value);\r\n}\r\n\r\nfunction bindUniformBool(gl: WebGLRenderingContext, location: WebGLUniformLocation, value: boolean | number): void {\r\n    gl.uniform1i(location, +value);\r\n}\r\n\r\nfunction bindUniformBool2v(gl: WebGLRenderingContext, location: WebGLUniformLocation, value): void {\r\n    gl.uniform2iv(location, value);\r\n}\r\n\r\nfunction bindUniformBool3v(gl: WebGLRenderingContext, location: WebGLUniformLocation, value): void {\r\n    gl.uniform3iv(location, value);\r\n}\r\n\r\nfunction bindUniformBool4v(gl: WebGLRenderingContext, location: WebGLUniformLocation, value): void {\r\n    gl.uniform4iv(location, value);\r\n}\r\n\r\nfunction bindUniformFloatMat2(gl: WebGLRenderingContext, location: WebGLUniformLocation, value: number[]): void {\r\n    gl.uniformMatrix2fv(location, false, value);\r\n}\r\n\r\nfunction bindUniformFloatMat3(gl: WebGLRenderingContext, location: WebGLUniformLocation, value: number[]): void {\r\n    gl.uniformMatrix3fv(location, false, value);\r\n}\r\n\r\nfunction bindUniformFloatMat4(gl: WebGLRenderingContext, location: WebGLUniformLocation, value: number[]): void {\r\n    gl.uniformMatrix4fv(location, false, value);\r\n}\r\n\r\nfunction bindSampler2D(gl: WebGLRenderingContext, location: WebGLUniformLocation, unitNb: number,\r\n                       value: WebGLTexture): void {\r\n    gl.uniform1i(location, unitNb);\r\n    gl.activeTexture(gl[\"TEXTURE\" + unitNb]);\r\n    gl.bindTexture(gl.TEXTURE_2D, value);\r\n}\r\n\r\nfunction bindSamplerCube(gl: WebGLRenderingContext, location: WebGLUniformLocation, unitNb: number,\r\n                         value: WebGLTexture): void {\r\n    gl.uniform1i(location, unitNb);\r\n    gl.activeTexture(gl[\"TEXTURE\" + unitNb]);\r\n    gl.bindTexture(gl.TEXTURE_CUBE_MAP, value);\r\n}\r\n\r\n/* From WebGL spec:\r\n* http://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14 */\r\nconst types = {\r\n    0x8B50: { str: \"FLOAT_VEC2\", binder: bindUniformFloat2v },\r\n    0x8B51: { str: \"FLOAT_VEC3\", binder: bindUniformFloat3v },\r\n    0x8B52: { str: \"FLOAT_VEC4\", binder: bindUniformFloat4v },\r\n    0x8B53: { str: \"INT_VEC2\", binder: bindUniformInt2v },\r\n    0x8B54: { str: \"INT_VEC3\", binder: bindUniformInt3v },\r\n    0x8B55: { str: \"INT_VEC4\", binder: bindUniformInt4v },\r\n    0x8B56: { str: \"BOOL\", binder: bindUniformBool },\r\n    0x8B57: { str: \"BOOL_VEC2\", binder: bindUniformBool2v },\r\n    0x8B58: { str: \"BOOL_VEC3\", binder: bindUniformBool3v },\r\n    0x8B59: { str: \"BOOL_VEC4\", binder: bindUniformBool4v },\r\n    0x8B5A: { str: \"FLOAT_MAT2\", binder: bindUniformFloatMat2 },\r\n    0x8B5B: { str: \"FLOAT_MAT3\", binder: bindUniformFloatMat3 },\r\n    0x8B5C: { str: \"FLOAT_MAT4\", binder: bindUniformFloatMat4 },\r\n    0x8B5E: { str: \"SAMPLER_2D\", binder: bindSampler2D },\r\n    0x8B60: { str: \"SAMPLER_CUBE\", binder: bindSamplerCube },\r\n    0x1400: { str: \"BYTE\", binder: notImplemented },\r\n    0x1401: { str: \"UNSIGNED_BYTE\", binder: notImplemented },\r\n    0x1402: { str: \"SHORT\", binder: notImplemented },\r\n    0x1403: { str: \"UNSIGNED_SHORT\", binder: notImplemented },\r\n    0x1404: { str: \"INT\", binder: bindUniformInt },\r\n    0x1405: { str: \"UNSIGNED_INT\", binder: notImplemented },\r\n    0x1406: { str: \"FLOAT\", binder: bindUniformFloat },\r\n};\r\n\r\ninterface IShaderUniform {\r\n    value: boolean | boolean[] | number | number[] | WebGLTexture | WebGLTexture[];\r\n    loc: WebGLUniformLocation;\r\n    size: number;\r\n    type: number;\r\n}\r\n\r\ninterface IShaderAttribute {\r\n    VBO: VBO;\r\n    loc: GLint;\r\n    size: number;\r\n    type: number;\r\n}\r\n\r\nclass ShaderProgram extends GLResource {\r\n    public u: IShaderUniform[];\r\n    public a: IShaderAttribute[];\r\n\r\n    private id: WebGLProgram;\r\n    private uCount: number;\r\n    private aCount: number;\r\n\r\n    constructor(gl: WebGLRenderingContext, vertexSource: string, fragmentSource: string) {\r\n        function createShader(type: GLenum, source: string): WebGLShader {\r\n            const shader = gl.createShader(type);\r\n            gl.shaderSource(shader, source);\r\n            gl.compileShader(shader);\r\n\r\n            const compileSuccess = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\r\n            if (!compileSuccess) {\r\n                console.error(gl.getShaderInfoLog(shader));\r\n                gl.deleteShader(shader);\r\n                return null;\r\n            }\r\n\r\n            return shader;\r\n        }\r\n\r\n        super(gl);\r\n\r\n        this.id = null;\r\n        this.uCount = 0;\r\n        this.aCount = 0;\r\n\r\n        const vertexShader = createShader(gl.VERTEX_SHADER, vertexSource);\r\n        const fragmentShader = createShader(gl.FRAGMENT_SHADER, fragmentSource);\r\n\r\n        const id = gl.createProgram();\r\n        gl.attachShader(id, vertexShader);\r\n        gl.attachShader(id, fragmentShader);\r\n        gl.linkProgram(id);\r\n\r\n        const linkSuccess = gl.getProgramParameter(id, gl.LINK_STATUS);\r\n        if (!linkSuccess) {\r\n            console.error(gl.getProgramInfoLog(id));\r\n            gl.deleteProgram(id);\r\n        } else {\r\n            this.id = id;\r\n\r\n            this.introspection();\r\n        }\r\n    }\r\n\r\n    public freeGLResources(): void {\r\n        super.gl().deleteProgram(this.id);\r\n        this.id = null;\r\n    }\r\n\r\n    public use(): void {\r\n        super.gl().useProgram(this.id);\r\n    }\r\n\r\n    public bindUniforms(): void {\r\n        const gl: WebGLRenderingContext = super.gl();\r\n        let currTextureUnitNb: number = 0;\r\n\r\n        Object.keys(this.u).forEach((uName) => {\r\n            const uniform = this.u[uName];\r\n            if (uniform.value !== null) {\r\n                if (uniform.type === 0x8B5E || uniform.type === 0x8B60) {\r\n                    const unitNb: number = currTextureUnitNb;\r\n                    types[uniform.type].binder(gl, uniform.loc, unitNb, uniform.value);\r\n                    currTextureUnitNb++;\r\n                } else {\r\n                    types[uniform.type].binder(gl, uniform.loc, uniform.value);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    public bindAttributes(): void {\r\n        Object.keys(this.a).forEach((aName) => {\r\n            const attribute = this.a[aName];\r\n            if (attribute.VBO !== null) {\r\n                attribute.VBO.bind(attribute.loc);\r\n            }\r\n        });\r\n    }\r\n\r\n    public bindUniformsAndAttributes(): void {\r\n        this.bindUniforms();\r\n        this.bindAttributes();\r\n    }\r\n\r\n    private introspection(): void {\r\n        const gl = super.gl();\r\n\r\n        this.uCount = gl.getProgramParameter(this.id, gl.ACTIVE_UNIFORMS);\r\n        this.u = [];\r\n        for (let i = 0; i < this.uCount; ++i) {\r\n            const uniform = gl.getActiveUniform(this.id, i);\r\n            const name = uniform.name;\r\n\r\n            this.u[name] = {\r\n                loc: gl.getUniformLocation(this.id, name),\r\n                size: uniform.size,\r\n                type: uniform.type,\r\n                value: null,\r\n            };\r\n        }\r\n\r\n        this.aCount = gl.getProgramParameter(this.id, gl.ACTIVE_ATTRIBUTES);\r\n        this.a = [];\r\n        for (let i = 0; i < this.aCount; ++i) {\r\n            const attribute = gl.getActiveAttrib(this.id, i);\r\n            const name = attribute.name;\r\n\r\n            this.a[name] = {\r\n                VBO: null,\r\n                loc: gl.getAttribLocation(this.id, name),\r\n                size: attribute.size,\r\n                type: attribute.type,\r\n            };\r\n        }\r\n    }\r\n}\r\n\r\nexport default ShaderProgram;\r\n","import GLResource from \"./gl-resource\";\r\n\r\nclass VBO extends GLResource {\r\n    public static createQuad(gl: WebGLRenderingContext, minX: number, minY: number, maxX: number, maxY: number): VBO {\r\n        const vert = [\r\n            minX, minY,\r\n            maxX, minY,\r\n            minX, maxY,\r\n            maxX, maxY,\r\n        ];\r\n\r\n        return new VBO(gl, new Float32Array(vert), 2, gl.FLOAT);\r\n    }\r\n\r\n    private id: WebGLBuffer;\r\n    private size: number;\r\n    private type: GLenum;\r\n    private normalize: GLboolean;\r\n    private stride: GLsizei;\r\n    private offset: GLintptr;\r\n\r\n    constructor(gl: WebGLRenderingContext, array: any, size: number, type: GLenum) {\r\n        super(gl);\r\n\r\n        this.id = gl.createBuffer();\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.id);\r\n        gl.bufferData(gl.ARRAY_BUFFER, array, gl.STATIC_DRAW);\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\r\n\r\n        this.size = size;\r\n        this.type = type;\r\n        this.normalize = false;\r\n        this.stride = 0;\r\n        this.offset = 0;\r\n    }\r\n\r\n    public freeGLResources(): void {\r\n        this.gl().deleteBuffer(this.id);\r\n        this.id = null;\r\n    }\r\n\r\n    public bind(location: GLuint): void {\r\n        const gl = super.gl();\r\n\r\n        gl.enableVertexAttribArray(location);\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.id);\r\n        gl.vertexAttribPointer(location, this.size, this.type, this.normalize, this.stride, this.offset);\r\n    }\r\n}\r\n\r\nexport default VBO;\r\n","class Viewport {\r\n    public static setFullCanvas(gl: WebGLRenderingContext): void {\r\n        gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\r\n    }\r\n\r\n    public lower: number;\r\n    public left: number;\r\n    public width: number;\r\n    public height: number;\r\n\r\n    constructor(left: number, lower: number, width: number, height: number) {\r\n        this.left = left;\r\n        this.lower = lower;\r\n        this.width = width;\r\n        this.height = height;\r\n    }\r\n\r\n    public set(gl: WebGLRenderingContext): void {\r\n        gl.viewport(this.lower, this.left, this.width, this.height);\r\n    }\r\n}\r\n\r\nexport default Viewport;\r\n","import Converter from \"./converter\";\r\nimport { Format, FormatUtils } from \"./format-utils\";\r\nimport * as GlCanvas from \"./gl-utils/gl-canvas\";\r\nimport { gl } from \"./gl-utils/gl-canvas\";\r\nimport Viewport from \"./gl-utils/viewport\";\r\nimport { Parameters } from \"./parameters\";\r\nimport Viewer from \"./viewer\";\r\n\r\nimport \"./page-interface-generated\";\r\n\r\nfunction main() {\r\n    function resetEditControls() {\r\n        Parameters.paddingTop = 0;\r\n        Parameters.paddingBottom = 0;\r\n        Parameters.paddingBack = 0;\r\n        Parameters.rotateZ = 0;\r\n        Parameters.flipVertically = false;\r\n    }\r\n\r\n    Page.Canvas.showLoader(true);\r\n\r\n    Parameters.onImageLoadObservers.push(resetEditControls);\r\n\r\n    Parameters.image = new Image();\r\n    Parameters.image.src = \"./images/skybox.jpg\";\r\n\r\n    Parameters.inputFormat = Format.Skybox;\r\n\r\n    Parameters.outputFormat = Format.Skysphere;\r\n    Parameters.previewOutput = false;\r\n\r\n    Parameters.fov = 70 * Math.PI / 180;\r\n    Parameters.showFrame = false;\r\n    resetEditControls();\r\n\r\n    const glParams = {\r\n        alpha: false,\r\n        preserveDrawingBuffer: true,\r\n    };\r\n    if (!GlCanvas.initGL(glParams)) {\r\n        return;\r\n    }\r\n\r\n    const viewer = new Viewer();\r\n    const converter = new Converter();\r\n\r\n    let forceRedraw = false;\r\n\r\n    Page.FileControl.addDownloadObserver(\"file-download-id\", () => {\r\n        const idealWidth = Parameters.image.width * Parameters.outputPercentage;\r\n        const width = Math.pow(2, Math.floor(Math.log(idealWidth) * Math.LOG2E));\r\n        const height = width / FormatUtils.ratio(Parameters.outputFormat);\r\n\r\n        const canvas = Page.Canvas.getCanvas() as HTMLCanvasElement;\r\n\r\n        /* Update CSS to allow the canvas to have the correct size */\r\n        canvas.style.position = \"absolute\";\r\n        canvas.style.width = width + \"px\";\r\n        canvas.style.height = height + \"px\";\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n\r\n        GlCanvas.adjustSize();\r\n        Viewport.setFullCanvas(gl);\r\n\r\n        /* tslint:disable:no-bitwise */\r\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n        converter.draw(viewer.texture);\r\n        /* tslint:disable:no-bitwise */\r\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n        converter.draw(viewer.texture);\r\n        /* tslint:enable:no-bitwise */\r\n\r\n        function restoreCanvas() {\r\n            /* Restore CSS */\r\n            canvas.style.position = \"\";\r\n            canvas.style.width = \"\";\r\n            canvas.style.height = \"\";\r\n\r\n            forceRedraw = true;\r\n        }\r\n\r\n        if ((canvas as any).msToBlob) { // for IE\r\n            const blob = (canvas as any).msToBlob();\r\n            (window.navigator as any).msSaveBlob(blob, \"image.png\");\r\n            restoreCanvas();\r\n        } else {\r\n            canvas.toBlob((blob) => {\r\n                const link = document.createElement(\"a\");\r\n                link.download = \"image.png\";\r\n                link.href = URL.createObjectURL(blob);\r\n                link.click();\r\n\r\n                restoreCanvas();\r\n            });\r\n        }\r\n    });\r\n\r\n    const previewViewport = new Viewport(0, 0, 1, 1);\r\n\r\n    function mainLoop() {\r\n        viewer.update();\r\n\r\n        if (viewer.needToRedraw || forceRedraw) {\r\n            GlCanvas.adjustSize();\r\n            Viewport.setFullCanvas(gl);\r\n\r\n            /* tslint:disable:no-bitwise */\r\n            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n            /* tslint:enable:no-bitwise */\r\n\r\n            viewer.draw();\r\n\r\n            if (Parameters.previewOutput) {\r\n                previewViewport.width = 0.3 * gl.drawingBufferWidth;\r\n                previewViewport.height = previewViewport.width / FormatUtils.ratio(Parameters.outputFormat);\r\n                previewViewport.set(gl);\r\n                converter.draw(viewer.texture);\r\n            }\r\n\r\n            forceRedraw = false;\r\n        }\r\n\r\n        requestAnimationFrame(mainLoop);\r\n    }\r\n\r\n    requestAnimationFrame(mainLoop);\r\n}\r\n\r\nmain();\r\n","import { Format, FormatUtils } from \"./format-utils\";\r\n\r\nimport \"./page-interface-generated\";\r\n\r\ntype OnChangeCallback = () => void;\r\n\r\nconst onChangeObservers = new Array<OnChangeCallback>();\r\nfunction callOnChangeObservers(): void {\r\n    for (const callback of Parameters.onChangeObservers) {\r\n        callback();\r\n    }\r\n}\r\n\r\ntype OnImageLoadCallback = (img: HTMLImageElement) => void;\r\nconst onImageLoadObservers = new Array<OnImageLoadCallback>();\r\n\r\nlet image: HTMLImageElement;\r\n\r\nconst FILE_UPLOAD_CONTROL = \"file-upload-id\";\r\nPage.FileControl.addUploadObserver(FILE_UPLOAD_CONTROL, (files: FileList) => {\r\n    Page.Canvas.showLoader(true);\r\n\r\n    const reader = new FileReader();\r\n\r\n    reader.onload = () => {\r\n        Parameters.image = new Image();\r\n        Parameters.image.src = reader.result as any;\r\n    };\r\n\r\n    reader.readAsDataURL(files[0]);\r\n});\r\n\r\ntype OnInputFormatChangeCallback = (previous: Format, newOne: Format) => void;\r\nconst onInputFormatChangeObservers = new Array<OnInputFormatChangeCallback>();\r\n\r\nlet inputFormat: Format;\r\nconst INPUT_FORMAT_CONTROL = \"input-format\";\r\nPage.Tabs.addObserver(INPUT_FORMAT_CONTROL, (values: string[]) => {\r\n    const previous = inputFormat;\r\n    inputFormat = FormatUtils.parseString(values[0]);\r\n\r\n    for (const callback of onInputFormatChangeObservers) {\r\n        callback(previous, inputFormat);\r\n    }\r\n});\r\n\r\nlet outputFormat: Format;\r\nconst OUTPUT_FORMAT_CONTROL = \"output-format\";\r\nPage.Tabs.addObserver(OUTPUT_FORMAT_CONTROL, (values: string[]) => {\r\n    outputFormat = FormatUtils.parseString(values[0]);\r\n    callOnChangeObservers();\r\n});\r\n\r\nlet outputPreview: boolean;\r\nconst OUPUT_PREVIEW_CONTROL = \"output-preview-id\";\r\nPage.Checkbox.addObserver(OUPUT_PREVIEW_CONTROL, (checked: boolean) => {\r\n    outputPreview = checked;\r\n    callOnChangeObservers();\r\n});\r\n\r\nlet fov: number;\r\nconst FOV_CONTROL = \"fov-range-id\";\r\nPage.Range.addObserver(FOV_CONTROL, (newFov: number) => {\r\n    fov = Math.PI / 180 * newFov;\r\n    callOnChangeObservers();\r\n});\r\n\r\nlet showFrame: boolean;\r\nconst FRAME_CONTROL = \"frame-checkbox-id\";\r\nPage.Checkbox.addObserver(FRAME_CONTROL, (checked: boolean) => {\r\n    showFrame = checked;\r\n    callOnChangeObservers();\r\n});\r\n\r\nlet paddingTOP: number;\r\nconst PADDING_TOP_CONTROL = \"padding-top-range-id\";\r\nPage.Range.addObserver(PADDING_TOP_CONTROL, (margin: number) => {\r\n    paddingTOP = margin;\r\n    callOnChangeObservers();\r\n});\r\n\r\nlet paddingBottom: number;\r\nconst PADDING_BOTTOM_CONTROL = \"padding-bottom-range-id\";\r\nPage.Range.addObserver(PADDING_BOTTOM_CONTROL, (margin: number) => {\r\n    paddingBottom = margin;\r\n    callOnChangeObservers();\r\n});\r\n\r\nlet paddingBack: number;\r\nconst PADDING_BACK_CONTROL = \"padding-back-range-id\";\r\nPage.Range.addObserver(PADDING_BACK_CONTROL, (margin: number) => {\r\n    paddingBack = margin;\r\n    callOnChangeObservers();\r\n});\r\n\r\nlet rotateZ: number;\r\nconst ROTATE_Z_CONTROL = \"rotate-z-range-id\";\r\nPage.Range.addObserver(ROTATE_Z_CONTROL, (r: number) => {\r\n    rotateZ = r;\r\n    callOnChangeObservers();\r\n});\r\n\r\nlet flipVertically: boolean;\r\nconst FLIP_VERTICALLY_CONTROL = \"flip-vertically-checkbox-id\";\r\nPage.Checkbox.addObserver(FLIP_VERTICALLY_CONTROL, (checked: boolean) => {\r\n    flipVertically = checked;\r\n    callOnChangeObservers();\r\n});\r\n\r\nPage.Canvas.Observers.mouseWheel.push((delta: number) => {\r\n    Parameters.fov += delta * 10 * Math.PI / 180;\r\n});\r\n\r\nclass Parameters {\r\n    private constructor() { }\r\n\r\n    public static get onChangeObservers(): OnChangeCallback[] {\r\n        return onChangeObservers;\r\n    }\r\n\r\n    public static get onInputFormatChangeObservers(): OnInputFormatChangeCallback[] {\r\n        return onInputFormatChangeObservers;\r\n    }\r\n\r\n    public static get onImageLoadObservers(): OnImageLoadCallback[] {\r\n        return onImageLoadObservers;\r\n    }\r\n\r\n    public static set image(img: HTMLImageElement) {\r\n        const ERROR_MESSAGE_ID = \"invalid-image\";\r\n\r\n        image = img;\r\n        image.addEventListener(\"load\", () => {\r\n            Page.Demopage.removeErrorMessage(ERROR_MESSAGE_ID);\r\n            for (const callback of onImageLoadObservers) {\r\n                callback(image);\r\n            }\r\n\r\n            callOnChangeObservers();\r\n        });\r\n\r\n        image.addEventListener(\"error\", () => {\r\n            Page.Demopage.setErrorMessage(ERROR_MESSAGE_ID, \"The image could not be loaded.\");\r\n            Page.Canvas.showLoader(false);\r\n            console.error(\"Image could not be loaded.\");\r\n        });\r\n    }\r\n    public static get image(): HTMLImageElement {\r\n        return image;\r\n    }\r\n\r\n    public static set inputFormat(value: Format) {\r\n        inputFormat = value;\r\n        Page.Tabs.setValues(INPUT_FORMAT_CONTROL, [value]);\r\n        callOnChangeObservers();\r\n    }\r\n    public static get inputFormat(): Format {\r\n        return inputFormat;\r\n    }\r\n\r\n    public static set previewOutput(show: boolean) {\r\n        outputPreview = show;\r\n        Page.Checkbox.setChecked(OUPUT_PREVIEW_CONTROL, show);\r\n        callOnChangeObservers();\r\n    }\r\n    public static get previewOutput(): boolean {\r\n        return outputPreview;\r\n    }\r\n\r\n    public static set outputFormat(value: Format) {\r\n        outputFormat = value;\r\n        Page.Tabs.setValues(OUTPUT_FORMAT_CONTROL, [value]);\r\n        callOnChangeObservers();\r\n    }\r\n    public static get outputFormat(): Format {\r\n        return outputFormat;\r\n    }\r\n\r\n    public static get outputPercentage(): number {\r\n        return +Page.Tabs.getValues(\"output-quality\")[0] / 100;\r\n    }\r\n\r\n    public static set fov(value: number) {\r\n        Page.Range.setValue(FOV_CONTROL, value * 180 / Math.PI);\r\n        fov = Page.Range.getValue(FOV_CONTROL) * Math.PI / 180;\r\n        callOnChangeObservers();\r\n    }\r\n    public static get fov(): number {\r\n        return fov;\r\n    }\r\n\r\n    public static set showFrame(show: boolean) {\r\n        showFrame = show;\r\n        Page.Checkbox.setChecked(FRAME_CONTROL, show);\r\n        callOnChangeObservers();\r\n    }\r\n    public static get showFrame(): boolean {\r\n        return showFrame;\r\n    }\r\n\r\n    public static set paddingTop(margin: number) {\r\n        Page.Range.setValue(PADDING_TOP_CONTROL, margin);\r\n        paddingTOP = Page.Range.getValue(PADDING_TOP_CONTROL);\r\n        callOnChangeObservers();\r\n    }\r\n    public static get paddingTop(): number {\r\n        return paddingTOP;\r\n    }\r\n\r\n    public static set paddingBottom(margin: number) {\r\n        Page.Range.setValue(PADDING_BOTTOM_CONTROL, margin);\r\n        paddingBottom = Page.Range.getValue(PADDING_BOTTOM_CONTROL);\r\n        callOnChangeObservers();\r\n    }\r\n    public static get paddingBottom(): number {\r\n        return paddingBottom;\r\n    }\r\n\r\n    public static set paddingBack(margin: number) {\r\n        Page.Range.setValue(PADDING_BACK_CONTROL, margin);\r\n        paddingBack = Page.Range.getValue(PADDING_BACK_CONTROL);\r\n        callOnChangeObservers();\r\n    }\r\n    public static get paddingBack(): number {\r\n        return paddingBack;\r\n    }\r\n\r\n    public static set rotateZ(r: number) {\r\n        Page.Range.setValue(ROTATE_Z_CONTROL, r);\r\n        rotateZ = Page.Range.getValue(ROTATE_Z_CONTROL);\r\n        callOnChangeObservers();\r\n    }\r\n    public static get rotateZ(): number {\r\n        return rotateZ;\r\n    }\r\n\r\n    public static set flipVertically(show: boolean) {\r\n        flipVertically = show;\r\n        Page.Checkbox.setChecked(FLIP_VERTICALLY_CONTROL, show);\r\n        callOnChangeObservers();\r\n    }\r\n    public static get flipVertically(): boolean {\r\n        return flipVertically;\r\n    }\r\n}\r\n\r\nconst css = document.createElement(\"style\");\r\ncss.type = \"text/css\";\r\ncss.innerHTML = \"canvas:active { cursor: grab; }\";\r\ndocument.body.appendChild(css);\r\n\r\nexport {\r\n    Parameters,\r\n};\r\n","import { gl } from \"./gl-utils/gl-canvas\";\r\nimport GLResource from \"./gl-utils/gl-resource\";\r\nimport Shader from \"./gl-utils/shader\";\r\nimport * as ShaderManager from \"./gl-utils/shader-manager\";\r\nimport VBO from \"./gl-utils/vbo\";\r\n\r\nimport { Mat4 } from \"./gl-utils/matrix/mat4\";\r\nimport { Vec3 } from \"./gl-utils/matrix/vec3\";\r\n\r\nimport { Format, FormatUtils } from \"./format-utils\";\r\nimport { Parameters } from \"./parameters\";\r\n\r\nimport \"./page-interface-generated\";\r\n\r\nclass Viewer extends GLResource {\r\n    private _shaderSkybox: Shader;\r\n    private _shaderSkysphere: Shader;\r\n    private _shaderTinyplanet: Shader;\r\n\r\n    private _vbo: VBO;\r\n    private _texture: WebGLTexture;\r\n\r\n    private _eyePos: Vec3;\r\n    private _vertical: Vec3;\r\n\r\n    private _tmpMatrix: Mat4;\r\n    private _projToWorldMatrix: Mat4;\r\n\r\n    private _theta: number;\r\n    private _phi: number;\r\n\r\n    private _needToReloadImage: boolean;\r\n    private _needToRedraw: boolean;\r\n\r\n    constructor() {\r\n        super(gl);\r\n\r\n        this._eyePos = new Vec3(0, 0, 0);\r\n        this._vertical = new Vec3(0, 0, 1);\r\n\r\n        this._tmpMatrix = new Mat4();\r\n        this._projToWorldMatrix = new Mat4();\r\n\r\n        this.resetThetaPhi();\r\n\r\n        this._needToReloadImage = false;\r\n        this._needToRedraw = true;\r\n        const doNeedToRedraw = () => { this._needToRedraw = true; };\r\n        const doNeedToReloadImage = () => {\r\n            doNeedToRedraw();\r\n            this.resetThetaPhi();\r\n            this._needToReloadImage = true;\r\n        };\r\n\r\n        Parameters.onInputFormatChangeObservers.push((previous: Format, newOne: Format) => {\r\n            if (previous === Format.Skybox || newOne === Format.Skybox) {\r\n                Page.Canvas.showLoader(true);\r\n                doNeedToReloadImage();\r\n            } else {\r\n                doNeedToRedraw();\r\n            }\r\n        });\r\n        Parameters.onChangeObservers.push(doNeedToRedraw);\r\n        Page.Canvas.Observers.canvasResize.push(doNeedToRedraw);\r\n        Page.Canvas.Observers.mouseDrag.push(doNeedToRedraw);\r\n\r\n        this._vbo = VBO.createQuad(gl, -1, -1, 1, 1);\r\n\r\n        this.buildShader(\"_shaderSkysphere\", \"viewer.vert\", \"viewerSkysphere.frag\");\r\n        this.buildShader(\"_shaderSkybox\", \"viewer.vert\", \"viewerSkybox.frag\");\r\n        this.buildShader(\"_shaderTinyplanet\", \"viewer.vert\", \"viewerTinyplanet.frag\");\r\n\r\n        Page.Canvas.Observers.mouseDrag.push((dX: number, dY: number) => {\r\n            this._phi += Parameters.fov * Page.Canvas.getAspectRatio() * dX;\r\n            this._theta -= Parameters.fov * dY;\r\n            this._theta = Math.min(Math.PI - 0.001, Math.max(0.001, this._theta));\r\n            doNeedToRedraw();\r\n        });\r\n\r\n        Parameters.onImageLoadObservers.push((image: HTMLImageElement) => {\r\n            Parameters.inputFormat = FormatUtils.guessFormat(image);\r\n            doNeedToReloadImage();\r\n        });\r\n    }\r\n\r\n    public freeGLResources(): void {\r\n        if (this._vbo) {\r\n            this._vbo.freeGLResources();\r\n            this._vbo = null;\r\n        }\r\n\r\n        if (this._texture) {\r\n            gl.deleteTexture(this._texture);\r\n            this._texture = null;\r\n        }\r\n\r\n        if (this._shaderSkybox) {\r\n            this._shaderSkybox.freeGLResources();\r\n            this._shaderSkybox = null;\r\n        }\r\n\r\n        if (this._shaderSkysphere) {\r\n            this._shaderSkysphere.freeGLResources();\r\n            this._shaderSkysphere = null;\r\n        }\r\n\r\n        if (this._shaderTinyplanet) {\r\n            this._shaderTinyplanet.freeGLResources();\r\n            this._shaderTinyplanet = null;\r\n        }\r\n    }\r\n\r\n    public get texture(): WebGLTexture {\r\n        return this._texture;\r\n    }\r\n\r\n    public get needToRedraw(): boolean {\r\n        return this._needToRedraw;\r\n    }\r\n\r\n    public update(): void {\r\n        if (this._needToReloadImage) {\r\n            if (Parameters.inputFormat === Format.Skybox) {\r\n                this.splitAndLoadSkybox(Parameters.image);\r\n            } else {\r\n                this.loadTexture(Parameters.image);\r\n            }\r\n\r\n            this._needToReloadImage = false;\r\n            Page.Canvas.showLoader(false);\r\n        }\r\n    }\r\n\r\n    public draw(): void {\r\n        let shader: Shader;\r\n        if (Parameters.inputFormat === Format.Skybox) {\r\n            shader = this._shaderSkybox;\r\n        } else if (Parameters.inputFormat === Format.Skysphere) {\r\n            shader = this._shaderSkysphere;\r\n        } else {\r\n            shader = this._shaderTinyplanet;\r\n        }\r\n\r\n        if (shader && this._texture) {\r\n            this.recomputeMatrices();\r\n\r\n            /* tslint:disable:no-string-literal */\r\n            shader.u[\"uProjToWorld\"].value = this._projToWorldMatrix.val;\r\n            shader.u[\"uTexture\"].value = this._texture;\r\n            shader.u[\"uPaddingTop\"].value = Parameters.paddingTop;\r\n            shader.u[\"uPaddingBottom\"].value = Parameters.paddingBottom;\r\n            shader.u[\"uPaddingBack\"].value = Parameters.paddingBack;\r\n            shader.u[\"uRotateZ\"].value = Parameters.rotateZ;\r\n            shader.u[\"uFlipVertically\"].value = Parameters.flipVertically ? -1 : 1;\r\n            shader.u[\"uShowFrame\"].value = Parameters.showFrame ? 1 : 0;\r\n            /* tslint:enable:no-string-literal */\r\n\r\n            shader.use();\r\n            shader.bindUniformsAndAttributes();\r\n\r\n            gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\r\n        }\r\n\r\n        this._needToRedraw = false;\r\n    }\r\n\r\n    private resetThetaPhi(): void {\r\n        this._theta = 0.5 * Math.PI;\r\n        this._phi = 0;\r\n        this._needToRedraw = true;\r\n    }\r\n\r\n    private loadTexture(image: HTMLImageElement): void {\r\n        gl.deleteTexture(this._texture);\r\n        this._texture = gl.createTexture();\r\n\r\n        gl.bindTexture(gl.TEXTURE_2D, this._texture);\r\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\r\n\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n    }\r\n\r\n    private splitAndLoadSkybox(image: HTMLImageElement): void {\r\n        function chooseUpperPowerOfTwo(n: number): number {\r\n            return Math.pow(2, Math.ceil(Math.log(n) * Math.LOG2E));\r\n        }\r\n\r\n        const side = chooseUpperPowerOfTwo(Math.floor(Math.max(image.width / 4, image.height / 3)));\r\n\r\n        gl.deleteTexture(this._texture);\r\n        this._texture = gl.createTexture();\r\n\r\n        /* Use a temporary canvas to split the image into each face of the cube */\r\n        const context = document.createElement(\"canvas\").getContext(\"2d\");\r\n        context.canvas.width = side;\r\n        context.canvas.height = side;\r\n\r\n        const sidesStyles = [\r\n            { target: gl.TEXTURE_CUBE_MAP_POSITIVE_X, position: { x: 2, y: 1 }, rotation: 0.5 * Math.PI },  // front\r\n            { target: gl.TEXTURE_CUBE_MAP_NEGATIVE_X, position: { x: 0, y: 1 }, rotation: -0.5 * Math.PI }, // back\r\n            { target: gl.TEXTURE_CUBE_MAP_POSITIVE_Y, position: { x: 1, y: 1 }, rotation: -Math.PI },       // left\r\n            { target: gl.TEXTURE_CUBE_MAP_NEGATIVE_Y, position: { x: 3, y: 1 }, rotation: 0 },              // right\r\n            { target: gl.TEXTURE_CUBE_MAP_POSITIVE_Z, position: { x: 1, y: 0 }, rotation: Math.PI },        // top\r\n            { target: gl.TEXTURE_CUBE_MAP_NEGATIVE_Z, position: { x: 1, y: 2 }, rotation: 0 },              // bottom\r\n        ];\r\n\r\n        gl.bindTexture(gl.TEXTURE_CUBE_MAP, this._texture);\r\n\r\n        context.translate(side, 0);\r\n        context.scale(-1, 1);\r\n\r\n        const sourceWidth = image.width / 4;\r\n        const sourceHeight = image.height / 3;\r\n        for (const sideStyle of sidesStyles) {\r\n            context.translate(0.5 * side, 0.5 * side);\r\n            context.rotate(sideStyle.rotation);\r\n            context.translate(-0.5 * side, -0.5 * side);\r\n\r\n            context.drawImage(image,\r\n                sideStyle.position.x * sourceWidth, sideStyle.position.y * sourceHeight,\r\n                sourceWidth, sourceHeight,\r\n                0, 0, side, side);\r\n\r\n            gl.texImage2D(sideStyle.target, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, context.canvas);\r\n\r\n            context.translate(0.5 * side, 0.5 * side);\r\n            context.rotate(-sideStyle.rotation);\r\n            context.translate(-0.5 * side, -0.5 * side);\r\n        }\r\n\r\n        gl.generateMipmap(gl.TEXTURE_CUBE_MAP);\r\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR);\r\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n    }\r\n\r\n    private buildShader(name: string, vertex: string, fragment: string): void {\r\n        ShaderManager.buildShader(\r\n            {\r\n                fragmentFilename: fragment,\r\n                vertexFilename: vertex,\r\n            },\r\n            (shader) => {\r\n                if (shader !== null) {\r\n                    /* tslint:disable:no-string-literal */\r\n                    this[name] = shader;\r\n                    this[name].a[\"aCorner\"].VBO = this._vbo;\r\n                    /* tslint:enable:no-string-literal */\r\n                    this._needToRedraw = true;\r\n                }\r\n            });\r\n    }\r\n\r\n    private recomputeMatrices(): void {\r\n        const lookAt = new Vec3(\r\n            Math.sin(this._theta) * Math.cos(this._phi),\r\n            Math.sin(this._theta) * Math.sin(this._phi),\r\n            Math.cos(this._theta),\r\n        );\r\n        this._projToWorldMatrix.lookAt(this._eyePos, lookAt, this._vertical);\r\n        this._projToWorldMatrix.invert();\r\n\r\n        const canvas = gl.canvas as HTMLCanvasElement;\r\n        const aspectRatio = canvas.clientWidth / canvas.clientHeight;\r\n        this._tmpMatrix.perspectiveInverse(Parameters.fov, aspectRatio, 0.1, Infinity);\r\n\r\n        // no need to remove translations from invViewMatrix since camera is on world (0,0,0)\r\n        // this._invViewMatrix[3*4 + 0] = 0;\r\n        // this._invViewMatrix[3*4 + 1] = 0;\r\n        // this._invViewMatrix[3*4 + 2] = 0;\r\n        this._projToWorldMatrix.multiplyRight(this._tmpMatrix);\r\n    }\r\n}\r\n\r\nexport default Viewer;\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(633);\n"],"names":["gl","_vbo","createQuad","buildShader","freeGLResources","this","deleteShader","draw","texture","shader","getShader","Parameters","inputFormat","outputFormat","u","value","paddingTop","paddingBottom","paddingBack","rotateZ","flipVertically","use","bindUniformsAndAttributes","drawArrays","TRIANGLE_STRIP","name","vertex","fragment","ShaderManager","fragmentFilename","vertexFilename","a","VBO","Format","Skybox","_shaderBoxToBox","Skysphere","_shaderBoxToSphere","_shaderBoxToPlanet","_shaderSphereToBox","_shaderSphereToSphere","_shaderSphereToPlanet","Tinyplanet","_shaderPlanetToBox","_shaderPlanetToSphere","_shaderPlanetToPlanet","Converter","guessFormat","image","FormatUtils","mayBeSkybox","ratio","width","height","Math","abs","parseString","str","format","context","document","createElement","getContext","willReadFrequently","canvas","drawImage","testedPixels","x","y","reference","getImageData","data","tested","sample","i","initGL","flags","setError","message","Page","Demopage","setErrorMessage","Canvas","getCanvas","disable","CULL_FACE","DEPTH_TEST","BLEND","clearColor","adjustSize","hidpi","cssPixel","window","devicePixelRatio","floor","clientWidth","clientHeight","_gl","GLResource","_val","Float32Array","identity","Mat4","_tmpMatrix","lookAt","eye","center","up","equals","z","Vec3","substract","normalize","crossProduct","dotProduct","multiplyRight","m2","tmp","tmpMatrix","myself","other","iCol","iRow","swapWithTmpMatrix","invert","m","m00","m01","m02","m03","m10","m11","m12","m13","m20","m21","m22","m23","m30","m31","m32","m33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","tmpVals","perspective","fovy","aspectRatio","nearPlane","farPlane","f","tan","Infinity","perspectiveInverse","EPSILON","v1","v2","divideByScalar","scalar","norm","sqrt","length","cachedShaders","infos","callback","sourcesPending","sourcesFailed","loadedSource","success","vert","ShaderSources","getSource","frag","loadSource","registerShader","callAndClearCallbacks","cached","callbacks","cachedCallback","failed","pending","builtShader","push","cachedSources","filename","text","XMLHttpRequest","open","onload","readyState","status","responseText","console","error","statusText","onerror","send","notImplemented","location","alert","types","binder","uniform2fv","uniform3fv","uniform4fv","uniform2iv","uniform3iv","uniform4iv","uniform1i","uniformMatrix2fv","uniformMatrix3fv","uniformMatrix4fv","unitNb","activeTexture","bindTexture","TEXTURE_2D","TEXTURE_CUBE_MAP","Array","isArray","uniform1iv","uniform1fv","uniform1f","vertexSource","fragmentSource","createShader","type","source","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","id","uCount","aCount","vertexShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","introspection","getProgramInfoLog","deleteProgram","useProgram","bindUniforms","currTextureUnitNb","Object","keys","forEach","uName","uniform","loc","bindAttributes","aName","attribute","bind","ACTIVE_UNIFORMS","getActiveUniform","getUniformLocation","size","ACTIVE_ATTRIBUTES","getActiveAttrib","getAttribLocation","ShaderProgram","array","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","stride","offset","minX","minY","maxX","maxY","FLOAT","deleteBuffer","enableVertexAttribArray","vertexAttribPointer","left","lower","setFullCanvas","viewport","drawingBufferWidth","drawingBufferHeight","set","Viewport","resetEditControls","showLoader","onImageLoadObservers","Image","src","previewOutput","fov","PI","showFrame","GlCanvas","alpha","preserveDrawingBuffer","viewer","converter","forceRedraw","FileControl","addDownloadObserver","idealWidth","outputPercentage","pow","log","LOG2E","restoreCanvas","style","position","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","msToBlob","blob","navigator","msSaveBlob","toBlob","link","download","href","URL","createObjectURL","click","previewViewport","requestAnimationFrame","mainLoop","update","needToRedraw","main","onChangeObservers","callOnChangeObservers","addUploadObserver","files","reader","FileReader","result","readAsDataURL","onInputFormatChangeObservers","INPUT_FORMAT_CONTROL","Tabs","addObserver","values","previous","outputPreview","OUTPUT_FORMAT_CONTROL","OUPUT_PREVIEW_CONTROL","Checkbox","checked","FOV_CONTROL","Range","newFov","paddingTOP","FRAME_CONTROL","PADDING_TOP_CONTROL","margin","PADDING_BOTTOM_CONTROL","PADDING_BACK_CONTROL","ROTATE_Z_CONTROL","r","FLIP_VERTICALLY_CONTROL","Observers","mouseWheel","delta","img","ERROR_MESSAGE_ID","addEventListener","removeErrorMessage","setValues","show","setChecked","getValues","setValue","getValue","css","innerHTML","body","appendChild","_eyePos","_vertical","_projToWorldMatrix","resetThetaPhi","_needToReloadImage","_needToRedraw","doNeedToRedraw","doNeedToReloadImage","newOne","canvasResize","mouseDrag","dX","dY","_phi","getAspectRatio","_theta","min","max","_texture","deleteTexture","_shaderSkybox","_shaderSkysphere","_shaderTinyplanet","splitAndLoadSkybox","loadTexture","recomputeMatrices","val","createTexture","texImage2D","RGBA","UNSIGNED_BYTE","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_MAG_FILTER","n","side","ceil","sidesStyles","target","TEXTURE_CUBE_MAP_POSITIVE_X","rotation","TEXTURE_CUBE_MAP_NEGATIVE_X","TEXTURE_CUBE_MAP_POSITIVE_Y","TEXTURE_CUBE_MAP_NEGATIVE_Y","TEXTURE_CUBE_MAP_POSITIVE_Z","TEXTURE_CUBE_MAP_NEGATIVE_Z","translate","scale","sourceWidth","sourceHeight","sideStyle","rotate","generateMipmap","LINEAR_MIPMAP_LINEAR","sin","cos","Viewer","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call"],"sourceRoot":""}